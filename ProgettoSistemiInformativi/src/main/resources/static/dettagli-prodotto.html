<!DOCTYPE html>
<html>
<head>
  <title>Dettagli Prodotto</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    h1 {
      color: #333;
    }

    .details {
      margin-top: 20px;
    }

    .details p {
      margin-bottom: 10px;
    }
    .button {
      background-color: #4CAF50;
      border: none;
      color: white;
    }
    .button:hover {
      background-color: #3e8e41;
    }
  </style>
  <script>
  function getProductDetails() {
      var badgeCode = getBadgeCodeFromURL();
      var productId = getProductIdFromURL();
      var url = "/dettagli-prodotto?badgeCode=' + badgeCode + '&productId=" + productId;

      fetch(url)
        .then(response => response.json())
        .then(product => {
          document.getElementById('productBarCode').textContent = product.codiceBarre;
          document.getElementById('productPrice').textContent = product.prezzo;
          document.getElementById('productQuantity').textContent = product.quantita;
        })
        .catch(error => {
          console.error('Errore nel recupero dei dettagli del prodotto:', error);
        });
    }

    function getBadgeCodeFromURL() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('badgeCode');
    }

    function getProductIdFromURL() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('productId');
    }

    document.addEventListener('DOMContentLoaded', function() {
      getProductDetails();
    });

    function goBack() {
      history.back();
    }
  </script>
</head>
<body>
<h1>Dettagli Prodotto</h1>
<div class="details">
  <p><strong>Id:</strong> <span id="productBarCode"></span></p>
  <p><strong>Prezzo:</strong> <span id="productPrice"></span></p>
  <p><strong>Quantita' disponibile:</strong> <span id="productQuantity"></span></p>
</div>
<button class = "button" onclick="goBack()">Torna Indietro</button>
</body>
</html>
